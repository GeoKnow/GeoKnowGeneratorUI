@prefix :        <http://generator.geoknow.eu/resource/> .
@prefix dcterms:  <http://purl.org/dc/terms/> .
@prefix lds:     <http://stack.linkeddata.org/ldis-schema/> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sd:      <http://www.w3.org/ns/sparql-service-description#> .
@prefix void:    <http://rdfs.org/ns/void#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/> .
@prefix ontos:     <http://ldiw.ontos.com/ontology/> .

########### ABOUT THIS FILE #############################################################
# This file contains the configuration for the GeoKnow generator concerning
# the endpoints and default user credentials
# To have different instances of the workbench different prefixes for projects:
# Replace ***PROJECT_URL*** with the desided URI
# Replace ***REMOVED*** with the corresponding data
# #######################################################################################

# These triples describes the URL endpoints for the application

:LDWorkbench
  a       lds:StackComponent ;
  rdfs:comment "This resource contains all the configuration required by the application"^^xsd:string ;
  rdfs:label "LDWorkbench"^^xsd:string ;
  dcterms:hasVersion "2.0"^^xsd:string ;
  ontos:publicEndpoint :VirtuosoEndpoint ;
  ontos:authEndpoint :VirtuosoAuthSPARQLEndpoint ;
  ontos:frameworkDataDir "/var/generator"^^xsd:string ;
  foaf:homepage <http://localhost:8080/generator> ;
  sd:defaultDataset :default-dataset;  
  lds:integrates :Virtuoso, :SpringBatch, :Facete, :Limes, :Sparqlify, :TripleGeo, :GeoLift, :OntoWiki, :Mappify, :FagiGis;
  lds:providesService :PublishingService, :UserManagerService, :EmailService
  .

:UserManagerService
  a       lds:ComponentService ;
  dcterms:description "Provides create/update functionality for accounts and roles."^^xsd:string ;
  lds:serviceUrl <http://localhost:8080/generator/UserManagerServlet> .

:EmailService
  a       lds:EmailService ;
  dcterms:description "Provides functionality to send email notifications to users, and especially to send login information."^^xsd:string ;
  lds:password "***REMOVED***"^^xsd:string ;
  lds:user "***REMOVED***"^^xsd:string ;
  foaf:mbox <mailto:***REMOVED***> ;
  ontos:smtpHost "smtp.gmail.com"^^xsd:string ;
  ontos:smtpTlsPort "587"^^xsd:string ;
  ontos:smtpSslPort "465"^^xsd:string .

:PublishingService
  a       lds:PublicationService ;
  dcterms:description "Provides functionality to upload data to a target graph from several graphs and to do versioning."^^xsd:string ;
  lds:serviceUrl <http://localhost:8080/generator/rest/publish> . 


########### ROUTES RESTRICTIONS DESCRIPTION #######################################################
# Following triples describe required services for routes. It is used in conditional routing.
# #######################################################################################

:RolesRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/settings/roles"^^xsd:string;
      ontos:requiresService :UserManagerService .

:RdfImportRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/extraction-and-loading/import-rdf"^^xsd:string;
      ontos:requiresService :RdfImportService .
    
:SparqlifyRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/extraction-and-loading/sparqlify"^^xsd:string;
      ontos:requiresService :SparqlifyService .

:TripleGeoRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/extraction-and-loading/triplegeo"^^xsd:string;
      ontos:requiresService :TripleGeoService .

:D2RQGeoRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/extraction-and-loading/d2rq"^^xsd:string;
      ontos:requiresService :D2RQService .

:FaceteRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/search-querying-and-exploration/facete"^^xsd:string;
      ontos:requiresService :FaceteService .
    
:MappifyRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/search-querying-and-exploration/mappify"^^xsd:string;
      ontos:requiresService :MappifyService .
    
:OntoWikiRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/manual-revision-and-authoring/ontowiki"^^xsd:string;
      ontos:requiresService :OntoWikiService .
    
:LIMESRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/linking-and-fusing/limes"^^xsd:string;
      ontos:requiresService :LimesService .
    

:DeerRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/classification-and-enrichment/deer"^^xsd:string;
      ontos:requiresService :DEERService .

:FagiRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "/workbench/linking-and-fusing/fagi-gis"^^xsd:string;
      ontos:requiresService :FagiGisService .


:CoevRouteRestriction
      a     ontos:RouteRestriction;
      ontos:route "//workbench/evolution-and-repair/coevolution-apply"^^xsd:string;
      ontos:requiresService :CoevolutionService .
  



<h3 class="green bold" data-i18n="_data-sources_"></h3>


<h4 data-i18n="_sparql-endpoint_"></h4>

<div ng-controller="EndpointCtrl">

  <button ng-if="isUserAuthenticated()" type="button" class="btn btn-primary btn-large"
    ng-click="new();" data-toggle="modal" data-target="#modalEndpoint" data-i18n="_add-endpoint_"></button>

  <div class="modal fade" id="modalEndpoint">
  <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" ng-click="close('#modalEndpoint')" aria-hidden="true">&times;</button>
      <h5 class="modal-title green bold" data-i18n="{{modaltitle}}"></h5>
    </div>
    <div class="modal-body">
      <form name="endpointForm" class="form-horizontal" role="form" novalidate>
        <div class="form-group">
          <label for="uri" class="col-lg-2 control-label" data-i18n="_identifier_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" name="identifier" id="identifier" data-i18n-attr="_identifier_|placeholder" ng-model="endpoint.uri" ng-disabled="!isNew()" required regex-validate="identifier" unique-identifier>
            <div class="error" ng-show="endpointForm.identifier.$dirty && endpointForm.identifier.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="endpointForm.identifier.$error.required || endpointForm.identifier.$error.regexValidate" data-i18n="_malformed-letters-number-id-message_"></span>
              <span ng-show="endpointForm.identifier.$error.uniqueIdentifier" data-i18n="_id-already-exists-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="label" class="col-lg-2 control-label" data-i18n="_label_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" name="label" id="label" data-i18n-attr="_label_|placeholder" ng-model="endpoint.label" required>
            <div class="error" ng-show="endpointForm.label.$dirty && endpointForm.label.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="endpointForm.label.$error.required" data-i18n="_label-missed-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="endpoint" class="col-lg-2 control-label" data-i18n="_endpoint_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" name="endpoint" id="endpoint" data-i18n-attr="_endpoint_|placeholder" ng-model="endpoint.endpoint" required regex-validate="sparqlEndpoint">
             <div class="error" ng-show="endpointForm.endpoint.$dirty && endpointForm.endpoint.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="endpointForm.endpoint.$error.required || endpointForm.endpoint.$error.regexValidate" data-i18n="_malformed-endpoint-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="homepage" class="col-lg-2 control-label" data-i18n="_homepage_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" name="homepage" id="homepage" data-i18n-attr="_homepage_|placeholder" ng-model="endpoint.homepage" required regex-validate="url">
             <div class="error" ng-show="endpointForm.homepage.$dirty && endpointForm.homepage.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="endpointForm.homepage.$error.required || endpointForm.homepage.$error.regexValidate" data-i18n="_malformed-homepage-message_"></span>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn-sm btn-primary" ng-click="save()" ng-disabled="endpointForm.$invalid || isUnchanged(endpoint)" data-i18n="_save_"></button>
      <button type="button" class="btn-sm btn-default" ng-click="close('#modalEndpoint')" data-i18n="_cancel_"></button>
    </div>
  </div>
  </div>
  </div><!-- /.modal window -->

  <table class="table table-striped">
  <thead>
    <tr>
      <th ng-if="isUserAuthenticated()" data-i18n="_action_"></th>
      <th>URI</th>
      <th data-i18n="_label_"></th>
      <th data-i18n="_endpoint_"></th>
      <th data-i18n="_homepage_"></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="endpoint in endpoints">
      <td ng-if="isUserAuthenticated()">
        <button type="button" class="btn btn-default btn-xs" ng-click="delete('{{endpoint.uri}}')"><span class="glyphicon glyphicon-trash"></span></button>
        <button type="button" class="btn btn-default btn-xs" ng-click="edit('{{endpoint.uri}}');" data-toggle="modal" data-target="#modalEndpoint"><span class="glyphicon glyphicon-edit"></span></button>
      </td>
      <td>{{endpoint.uri}}</td>
      <td>{{endpoint.label}}</td>
      <td>{{endpoint.endpoint}}</td>
      <td>{{endpoint.homepage}}</td>
    </tr>
  </tbody>
  </table>
<!-- EndpointCtrl Controller -->
</div>


<h4 data-i18n="_rel-databases_"></h4>

<div ng-controller="DatabaseCtrl">

  <button ng-if="isUserAuthenticated()" type="button" class="btn btn-primary btn-large"
    ng-click="new();" data-toggle="modal" data-target="#modalDatabase" data-i18n="_add-db_"></button>

  <div class="modal fade" id="modalDatabase">
  <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" ng-click="close('#modalDatabase')" aria-hidden="true">&times;</button>
      <h5 class="modal-title green bold" data-i18n="{{modaltitle}}"></h5>
    </div>
    <div class="modal-body">
      <form name="databaseForm" class="form-horizontal" role="form" novalidate>
        <div class="form-group">
          <label for="identifier" class="col-lg-2 control-label" data-i18n="_identifier_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="identifier" name="identifier" data-i18n-attr="_identifier_|placeholder" ng-model="database.uri" ng-disabled="!isNew()" required regex-validate="identifier" unique-identifier >
            <div class="error" ng-show="databaseForm.identifier.$dirty && databaseForm.identifier.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.identifier.$error.required || databaseForm.identifier.$error.regexValidate" data-i18n="_malformed-letters-number-id-message_"></span>
              <span ng-show="databaseForm.identifier.$error.uniqueIdentifier" data-i18n="_id-already-exists-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="label" class="col-lg-2 control-label" data-i18n="_label_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" name="label" id="label" data-i18n-attr="_label_|placeholder" ng-model="database.label" required>
            <div class="error" ng-show="databaseForm.label.$dirty && databaseForm.label.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.label.$error.required" data-i18n="_label-missed-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="dbType" class="col-lg-2 control-label" data-i18n="_type_"></label>
          <div class="col-lg-10">
            <select id="dbType" name= "dbType" class="form-control" ng-model="database.dbType"
                ng-options="c.uri as c.label for c in databaseTypes" required>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="dbHost" class="col-lg-2 control-label" data-i18n="_host_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="dbHost" name="dbHost" data-i18n-attr="_host_|placeholder" ng-model="database.dbHost" required>
            <div class="error" ng-show="databaseForm.dbHost.$dirty && databaseForm.dbHost.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.dbHost.$error.required" data-i18n="_host-missed-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="dbPort" class="col-lg-2 control-label" data-i18n="_port_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="dbPort" name="dbPort" data-i18n-attr="_port_|placeholder" ng-model="database.dbPort" required>
            <div class="error" ng-show="databaseForm.dbPort.$dirty && databaseForm.dbPort.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.dbPort.$error.required" data-i18n="_port-missed-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="dbName" class="col-lg-2 control-label" data-i18n="_db-name_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="dbName" name="dbName" data-i18n-attr="_db_|placeholder" ng-model="database.dbName" required>
            <div class="error" ng-show="databaseForm.dbName.$dirty && databaseForm.dbName.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.dbName.$error.required" data-i18n="_db-name-missed-message_"></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="dbUser" class="col-lg-2 control-label" data-i18n="_user_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="dbUser" name="dbUser" data-i18n-attr="_user_|placeholder" ng-model="database.dbUser" required>
            <div class="error" ng-show="databaseForm.dbUser.$dirty && databaseForm.dbUser.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.dbUser.$error.required" data-i18n="_user-missed-message_"></span>
            </div>
          </div>
        </div>
              <div class="form-group">
          <label for="dbPassword" class="col-lg-2 control-label" data-i18n="_password_"></label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="dbPassword" name="dbPassword" data-i18n-attr="_password_|placeholder" ng-model="database.dbPassword" required>
            <div class="error" ng-show="databaseForm.dbPassword.$dirty && databaseForm.dbPassword.$invalid">{{'_invalid-field-message_' | i18n}}:
              <span ng-show="databaseForm.dbPassword.$error.required" data-i18n="_password-missed-message_"></span>
            </div>
          </div>
        </div>
      </form>

    </div>
    <div class="modal-footer">
      <button type="submit" class="btn-sm btn-primary" ng-click="save()" ng-disabled="databaseForm.$invalid || isUnchanged(database)" data-i18n="_save_"></button>
      <button type="button" class="btn-sm btn-default" ng-click="close('#modalDatabase')" data-i18n="_cancel_"></button>
    </div>
  </div>
  </div>
  </div>

  <table class="table table-striped">
  <thead>
    <tr>
      <th ng-if="isUserAuthenticated()" data-i18n="_action_"></th>
      <th>URI</th>
      <th data-i18n="_label_"></th>
      <th data-i18n="_type_"></th>
      <th data-i18n="_host_"></th>
      <th data-i18n="_name_"></th>
      <th data-i18n="_port_"></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="database in databases">
      <td ng-if="isUserAuthenticated()">
        <button type="button" class="btn btn-default btn-xs" ng-click="delete('{{database.uri}}')"><span class="glyphicon glyphicon-trash"></span></button>
        <button type="button" class="btn btn-default btn-xs" data-toggle="modal" data-target="#modalDatabase" ng-click="edit('{{database.uri}}'); "><span class="glyphicon glyphicon-edit"></span></button>
      </td>
      <td>{{database.uri}}</td>
      <td>{{database.label}}</td>
      <td>{{database.dbType}}</td>
      <td>{{database.dbHost}}</td>
      <td>{{database.dbName}}</td>
      <td>{{database.dbPort}}</td>
    </tr>
  </tbody>
  </table>
<!-- DatabaseCtrl Controller -->
</div>

